<html>
	<head>
		<title>AJAX Test</title>
		<style type="text/css">
			body {
                background-image: url("a.jpg");
            }
            #btnchange{
              margin: 0;
			  position: absolute;
			  top: 22%;
			  left: 42%;
			  background-color: green;
			  font-size: 25px;
			  padding: 10px;

            }
			#p1{
				text-align: center;
				color: black;
				font-size: 40px;
				font-weight: bold;
				margin-top: 50px;
				margin-bottom: 10px;
				margin-left: 90px;
				margin-right: 90px;
				background-color: pink;
				padding: 30px;
			}
			#p2{
				color: white;
				font-size: 25px;
				margin-top: 110px;
				margin-bottom: 10px;
				margin-left: 90px;
				margin-right: 90px;
				background-color: orange;
				padding: 30px;
			}
			#p3{
				color: white;
				font-size: 25px;
				margin-top: 50px;
				margin-bottom: 10px;
				margin-left: 90px;
				margin-right: 90px;
				background-color: orange;
				padding: 30px;
			}
			#p4{
				color: white;
				font-size: 25px;
				margin-top: 50px;
				margin-bottom: 10px;
				margin-left: 90px;
				margin-right: 90px;
				background-color: orange;
				padding: 30px;
			}
			#p5{
				color: white;
				font-size: 25px;
				margin-top: 50px;
				margin-bottom: 10px;
				margin-left: 90px;
				margin-right: 90px;
				background-color: orange;
				padding: 30px;
			}
		</style>
	</head>
	<body>
		<div><button id="btnChange">Click to see Feedback</button></div>	
		<div id="p1">Welcome to MEDICINE HOUSE feedback page</div>
		<p id="p2">Name</p>
		<p id="p3">Email</p>
		<p id="p4">Age</p>
		<p id="p5">Feedback</p>

	<script>
		let btnChange = document.querySelector("#btnChange");
	
		btnChange.addEventListener('click', () => {
		let email = prompt("Please enter the Email:");
		fetch('http://localhost/medicine_store/medicinehouse/see_feedback2.php?email='+email)
			.then(response => response.json())
			.then(json => {
				let p1 = document.querySelector("#p1");
				let p2 = document.querySelector("#p2");
				let p3 = document.querySelector("#p3");
			
				p2.innerHTML ="Patient name is: " + json['content'][0]['patient_name'];
				p3.innerHTML ="Patient email is: " +  json['content'][0]['email'];
				p4.innerHTML ="Patient age is: " +  json['content'][0]['age'];	
				if(json['content'][0]['feedback'] == 'No Feedback'){			
					p5.innerHTML = 'Your feedback is not ready yet, very soon our doctor will provide his valuable feedback'
				}else{
					p5.innerHTML ="Patient feedback is: " +  json['content'][0]['feedback'];
				}
				
				
				
			})
		});
/*		btnChange.addEventListener('click', () => {
		//let id = prompt("Please enter the task id:");
		fetch('http://localhost/crud2/read.php?option=2')
			.then(response => response.json())
			.then(json => {
				let p2 = document.querySelector("#p2");
				p2.innerHTML = json['age'];
			})
		});
*/
/*		btnChange.addEventListener('click', () => {
			let id = prompt("Please enter the task id:");
			fetch('https://jsonplaceholder.typicode.com/todos/' + id)
				.then(response => response.json())
				.then(json => {
					let p2 = document.querySelector("#p2");
					p2.innerHTML = json['title'];
				})
		});
*/

/*		btnChange.addEventListener('click', () => {
			var xmlhttp = new XMLHttpRequest();
			let id = prompt("Please enter the task id:");
			xmlhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				let p1 = document.querySelector('#p1');
				let p2 = document.querySelector('#p2');
				let p3 = document.querySelector('#p3');

				let myObj = JSON.parse(this.responseText);
				p1.innerHTML = myObj['id'];
				p2.innerHTML = myObj['title'];
				p3.innerHTML = myObj['completed'];
				//var myObj = JSON.parse(this.responseText);
				//document.getElementById("content").innerHTML = myObj.title;
			}
			};
			xmlhttp.open("GET","https://jsonplaceholder.typicode.com/todos/" + id, true);
			xmlhttp.send();
			//let name = prompt("Please enter your name");
			//let p = document.querySelector('#p1');
			//p.innerHTML = "Welcome, " + name;
		});
*/
	</script>
	</body>
</html>
